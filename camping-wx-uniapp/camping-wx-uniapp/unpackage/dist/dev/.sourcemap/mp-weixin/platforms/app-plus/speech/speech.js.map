{"version":3,"file":"speech.js","sources":["platforms/app-plus/speech/speech.vue","E:/A-new-start/HBuilderX.4.87.2025121004/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGxhdGZvcm1zL2FwcC1wbHVzL3NwZWVjaC9zcGVlY2gudnVl"],"sourcesContent":["<template>\r\n    <view>\r\n        <page-head :title=\"title\"></page-head>\r\n        <view class=\"uni-padding-wrap uni-common-mt\">\r\n            <view class=\"uni-textarea\">\r\n                <textarea :value=\"value\" placeholder=\"语音识别内容展示区域\" disabled />\r\n                </view>\r\n\t\t\t<view class=\"uni-common-mt uni-btn-v\">\r\n\t\t\t\t<button type=\"primary\" @tap=\"startRecognize\">开始语音识别</button>\r\n\t\t\t\t<!-- <button type=\"primary\" @tap=\"startRecognizeEnglish\">开始语音识别（英语）</button> -->\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t</view>\r\n</template>\r\n<script>\r\n    import permision from \"@/common/permission.js\"\r\n\texport default {\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\ttitle: 'speech',\r\n\t\t\t\tvalue: ''\r\n\t\t\t}\r\n\t\t},\r\n\t\tonUnload(){\r\n\t\t\tthis.value = \"\"\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\tasync startRecognize () {\r\n                // #ifdef APP-PLUS\r\n                let status = await this.checkPermission();\r\n                if (status !== 1) {\r\n                    return;\r\n                }\r\n                // #endif\r\n\r\n                // TODO ios 在没有请求过权限之前无法得知是否有相关权限，这种状态下需要直接调用语音，会弹出正在识别的toast\r\n\t\t\t\tvar options = {};\r\n\t\t\t\tvar that = this;\r\n\t\t\t\toptions.engine = 'baidu';\r\n\t\t\t\tthat.value = \"\";\r\n\t\t\t\tplus.speech.startRecognize(options, function (s) {\r\n\t\t\t\t\tconsole.log(s);\r\n\t\t\t\t\tthat.value += s;\r\n\t\t\t\t}, function (e) {\r\n\t\t\t\t\tconsole.log(\"语音识别失败：\" + e.message);\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tasync startRecognizeEnglish () {\r\n                // #ifdef APP-PLUS\r\n                let status = await this.checkPermission();\r\n                if (status !== 1) {\r\n                    return;\r\n                }\r\n                // #endif\r\n\r\n                // TODO ios 在没有请求过权限之前无法得知是否有相关权限，这种状态下需要直接调用语音，会弹出正在识别的toast\r\n\t\t\t\tvar options = {};\r\n\t\t\t\tvar that = this;\r\n\t\t\t\toptions.engine = 'baidu';\r\n\t\t\t\toptions.lang = 'en-us';\r\n\t\t\t\tthat.value = \"\";\r\n\t\t\t\tplus.speech.startRecognize(options, function (s) {\r\n\t\t\t\t\tconsole.log(s);\r\n\t\t\t\t\tthat.value += s;\r\n\t\t\t\t}, function (e) {\r\n\t\t\t\t\tconsole.log(\"语音识别失败：\" + e.message);\r\n\t\t\t\t});\r\n\t\t\t}\r\n            // #ifdef APP-PLUS\r\n            ,\r\n            async checkPermission() {\r\n                let status = permision.isIOS ? await permision.requestIOS('record') :\r\n                    await permision.requestAndroid('android.permission.RECORD_AUDIO');\r\n\r\n                if (status === null || status === 1) {\r\n                    status = 1;\r\n                } else if (status === 2) {\r\n                    uni.showModal({\r\n                        content: \"系统麦克风已关闭\",\n                        confirmText: \"确定\",\n                        showCancel: false,\r\n                        success: function(res) {\r\n                        }\r\n                    })\r\n                } else {\r\n                    uni.showModal({\r\n                        content: \"需要麦克风权限\",\r\n                        confirmText: \"设置\",\r\n                        success: function(res) {\r\n                            if (res.confirm) {\r\n                                permision.gotoAppSetting();\r\n                            }\r\n                        }\r\n                    })\r\n                }\r\n                return status;\r\n            }\r\n            // #endif\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style>\r\n\r\n</style>\n","import MiniProgramPage from 'C:/Users/Administrator/Desktop/2026年1月7日/卡歌/露营小程序/项目/camping-wx-uniapp/camping-wx-uniapp/platforms/app-plus/speech/speech.vue'\nwx.createPage(MiniProgramPage)"],"names":["uni"],"mappings":";;AAgBC,MAAK,YAAU;AAAA,EACd,OAAO;AACN,WAAO;AAAA,MACN,OAAO;AAAA,MACP,OAAO;AAAA,IACR;AAAA,EACA;AAAA,EACD,WAAU;AACT,SAAK,QAAQ;AAAA,EACb;AAAA,EACD,SAAS;AAAA,IACR,MAAM,iBAAkB;AASvB,UAAI,UAAU,CAAA;AACd,UAAI,OAAO;AACX,cAAQ,SAAS;AACjB,WAAK,QAAQ;AACb,WAAK,OAAO,eAAe,SAAS,SAAU,GAAG;AAChDA,sBAAAA,iEAAY,CAAC;AACb,aAAK,SAAS;AAAA,MACd,GAAE,SAAU,GAAG;AACfA,sBAAY,MAAA,MAAA,OAAA,8CAAA,YAAY,EAAE,OAAO;AAAA,MAClC,CAAC;AAAA,IACD;AAAA,IACD,MAAM,wBAAyB;AAS9B,UAAI,UAAU,CAAA;AACd,UAAI,OAAO;AACX,cAAQ,SAAS;AACjB,cAAQ,OAAO;AACf,WAAK,QAAQ;AACb,WAAK,OAAO,eAAe,SAAS,SAAU,GAAG;AAChDA,sBAAAA,iEAAY,CAAC;AACb,aAAK,SAAS;AAAA,MACd,GAAE,SAAU,GAAG;AACfA,sBAAY,MAAA,MAAA,OAAA,8CAAA,YAAY,EAAE,OAAO;AAAA,MAClC,CAAC;AAAA,IACF;AAAA,EA+BD;AACD;;;;;;;;;;;;;;;;;;;AClGD,GAAG,WAAW,eAAe;"}